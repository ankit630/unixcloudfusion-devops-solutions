.code_quality:
  include:
    - template: Code-Quality.gitlab-ci.yml
  strategy: depend
  variables:
    CODE_QUALITY_IMAGE: "registry.gitlab.com/gitlab-org/ci-cd/codequality:latest"
    REPORT_FORMAT: html  # Generate an HTML report in addition to JSON
    TIMEOUT_SECONDS: 900  # Set a 15-minute timeout (default is 10 minutes)
    CODE_QUALITY_CATEGORIES: "complexity,duplication,style,security,bug_risk"
  after_script:
    - echo "complete"
  artifacts:
    reports:
      codequality: gl-code-quality-report.json
    paths:
      - gl-code-quality-report.html
  allow_failure: true     # The job will not fail the pipeline if issues are found